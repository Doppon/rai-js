<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CSI-JS</title>
</head>

<!-- Using browserfy -->
<script src="csijs.js"></script>

<body>
<div id="output"> </div>
</body>

<script>
    let output = document.getElementById("output");
    let {Signal, SignalComp, Adaptation, CSI} = require("csijs");

    let screen = {
        gyroscope: new Signal(0),
        rotate: function () {
            output.innerHTML += 'Rotating <br>';
        }
    };

    let playerView = {
        draw: function () {
            output.innerHTML += 'Showing a Movie <br>';
        }
    };

    //adaptation
    let landscape = {
        condition: "gyroLevel > 45",
        enter: function () {
            output.innerHTML += 'ENTER TRANSITION <br>';
            screen.rotate();
        }
    };


    CSI.exhibit(screen, {gyroLevel: screen.gyroscope});

    CSI.addLayer(landscape, playerView, "draw",
        function () {
            Adaptation.proceed();
            output.innerHTML += '[LAYER] Landscape Mode <br>';
        }
    );


    CSI.deploy(landscape);
    playerView.draw();

    output.innerHTML += '<br>Change SmartPhone position <br>';
    screen.gyroscope.value = 60;
    playerView.draw();
</script>
</html>